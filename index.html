<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>대화 리허설 + 공감 코칭 MVP</title>
  <meta name="description" content="상대 마음을 확정하지 않고, 대화를 리허설하는 공감 코칭 도구" />
  <link href="/style.css" rel="stylesheet" />
</head>
<body>
  <main class="app">
    <header class="hero">
      <p class="eyebrow">Rehearsal · Empathy · Practice</p>
      <h1>대화 리허설 + 공감 코칭</h1>
      <p class="subtitle">상대의 마음을 확정하는 도구가 아니라, 가능한 반응을 가정해 연습하는 리허설 도구입니다.</p>
    </header>

    <nav class="top-nav" aria-label="페이지 이동">
      <a href="#/setup">설정</a>
      <a href="#/chat">채팅</a>
      <a href="#/report">리포트</a>
    </nav>

    <section id="setup" class="panel route" aria-label="설정 화면">
      <div class="panel-header">
        <h2>/setup</h2>
      </div>
      <p class="notice">
        안내: 이 서비스는 상대 마음을 확정적으로 맞히는 도구가 아닙니다. 가능성과 가정을 바탕으로 대화를 연습하는 리허설 도구입니다.
      </p>
      <div class="controls">
        <label class="field">
          <span>대화 유형</span>
          <select id="conversationType">
            <option value="child" selected>자녀와의 대화</option>
            <option value="romance">썸/연애 대화</option>
          </select>
        </label>
        <label class="field">
          <span>상대 나이대</span>
          <select id="ageGroup">
            <option value="10대 이하">10대 이하</option>
            <option value="20대" selected>20대</option>
            <option value="30대">30대</option>
            <option value="40대 이상">40대 이상</option>
          </select>
        </label>
        <label class="field">
          <span>성별(선택)</span>
          <select id="gender">
            <option value="">선택 안 함</option>
            <option value="여성">여성</option>
            <option value="남성">남성</option>
            <option value="기타/응답 원치 않음">기타/응답 원치 않음</option>
          </select>
        </label>
        <label class="field">
          <span>MBTI(선택, 참고용)</span>
          <input id="mbti" type="text" maxlength="4" placeholder="예: INFP" />
        </label>
        <label class="field">
          <span>성향 프리셋</span>
          <select id="personaPreset">
            <option value="예민" selected>예민</option>
            <option value="무덤덤">무덤덤</option>
            <option value="불안형">불안형</option>
            <option value="자존감 낮음">자존감 낮음</option>
            <option value="회피형">회피형</option>
          </select>
        </label>
      </div>
      <div class="actions">
        <button id="startChatBtn" class="primary">이 설정으로 연습 시작</button>
      </div>
    </section>

    <section id="chat" class="panel route" aria-label="채팅 화면" hidden>
      <div class="panel-header">
        <h2>/chat</h2>
        <p id="usageBadge" class="meta">오늘 남은 무료 턴: -</p>
      </div>
      <p id="chatNotice" class="meta">
        개인정보(실명/학교/연락처/주소)는 입력하지 마세요. 입력 시 마스킹 또는 경고가 적용됩니다.
      </p>
      <div class="chat-layout">
        <div class="chat-column">
          <div id="chatLog" class="chat-log" role="log" aria-live="polite"></div>
          <div class="composer">
            <label class="field field-full" for="userInput">
              <span>내 문장</span>
              <textarea id="userInput" rows="3" placeholder="상황에 맞는 문장을 입력하세요."></textarea>
            </label>
            <div class="actions">
              <button id="sendBtn" class="primary">보내기</button>
              <button id="goReportBtn" class="ghost">리포트 보기</button>
            </div>
          </div>
        </div>

        <aside class="timeshift-panel" aria-label="타임머신 패널">
          <h3>타임머신 패널</h3>
          <p class="meta">내가 쓴 최근 문장을 3가지 버전으로 재작성합니다.</p>
          <div class="actions vertical-actions">
            <button data-rewrite="공감형" class="ghost rewrite-btn">공감형</button>
            <button data-rewrite="단호형" class="ghost rewrite-btn">단호형</button>
            <button data-rewrite="짧게" class="ghost rewrite-btn">짧게</button>
          </div>
          <div id="rewriteResult" class="rewrite-result"></div>
        </aside>
      </div>
    </section>

    <section id="report" class="panel route" aria-label="리포트 화면" hidden>
      <div class="panel-header">
        <h2>/report</h2>
        <button id="createReportBtn" class="primary">리포트 생성</button>
      </div>
      <p class="meta">기본 저장은 OFF이며, 리포트는 요청 시에만 현재 대화 로그를 기반으로 생성됩니다.</p>
      <div id="reportContent" class="report-content">
        아직 생성된 리포트가 없습니다.
      </div>
    </section>

    <footer class="footer">
      <p>본 서비스는 가능성 기반 리허설 도구이며, 특정 감정이나 의도를 확정하지 않습니다.</p>
    </footer>
  </main>

  <script defer type="text/javascript" src="/main.js"></script>
</body>
</html>
